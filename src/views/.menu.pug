- function childrenPages(parentPage) {
-    if (parentPage) {
-       var children = parentPage.properties.children || [];
-       return children.map(href => pageMap[href]);
-    }
-    return pages.filter(p => !p.href.replace(/\/$/, "").includes("/"));
- }


mixin createMenuItem(menuPage)
    - var pageName = menuPage.properties.name || menuPage.properties.title;
    - var className = menuPage.properties.icon ? "lenra-icon-" + menuPage.properties.icon : "";
    a(class=className href='/'+menuPage.href)= pageName
    - var subPages = childrenPages(menuPage);
    if (subPages.length)
        details(open=currentPage.path.startsWith(menuPage.href))
            summary Open/Close
            +createMenuItems(subPages)


mixin createMenuItems(pages)
    ul
        each page in pages
            li(class=(page.path==currentPage.path ? 'selected' : ''))
                +createMenuItem(page)

nav.invert-colors
    +createMenuItems(childrenPages())
